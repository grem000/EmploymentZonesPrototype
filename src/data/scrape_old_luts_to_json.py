import requests
from bs4 import BeautifulSoup
import re
import csv
import sys

debug=False

# https://legislation.nsw.gov.au/browse/inforce#/epi/title/ 
# var x = document.getElementsByClassName("document-link");
# JSON.stringify(Array.prototype.map.call(x,(a)=>{return a.href}),null,2)

url_list = ["https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0433", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0589", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0753", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0616", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1987-0095", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0020", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0363", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0140", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0729", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2002-0364", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0408", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0418", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0587", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0239", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0639", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0573", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1991-0683", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2005-0633", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0829", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1982-0014", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0640", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0302", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0252", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0313", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1995-0274", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0021", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0611", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0506", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0550", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1988-0329", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0297", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0002", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0514", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1995-0193", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0754", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1988-0012", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2002-0104", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0389", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0673", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0332", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0033", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0702", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0701", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0358", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0564", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0462", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0077", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0614", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0506", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0399", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0303", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0022", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1985-0333", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1998-0197", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0754", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0580", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0301", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0333", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0213", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1986-0511", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0428", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0641", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0467", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0241", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0042", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2009-0056", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0176", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0522", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1999-0052", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0287", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0137", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0507", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0304", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0591", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0507", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0079", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0470", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0642", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0139", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0569", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0034", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1994-0189", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0613", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0614", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0263", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0674", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0712", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-1996-0334", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0680", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0026", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0134", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0023", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0025", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0429", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2004-0116", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0605", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0049", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0353", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2000-0754", "https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0758"]
print(len(url_list))
url_list = [    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0433 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0589 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0753 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0616 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1987-0095 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0020 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0363 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0140 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0729 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2002-0364 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0408 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0418 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0587 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0239 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0639 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0573 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1991-0683 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2005-0633 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0829 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1982-0014 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0640 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0302 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0252 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0313 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1995-0274 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0021 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0611 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0506 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0550 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1988-0329 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0297 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0002 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0514 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1995-0193 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0754 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0389 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0673 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0332 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0033 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0702 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0701 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0358 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0564 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0462 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0077 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0614 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0506 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0399 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0303 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0022 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1985-0333 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1998-0197 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0754 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0580 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0301 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0333 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0213 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1986-0511 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0428 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0641 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0467 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0241 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0042 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2009-0056 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0176 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0522 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1999-0052 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0287 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0137 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0507 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0304 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0591 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0507 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0079 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0470 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0642 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0139 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0569 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0034 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1994-0189 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0613 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0614 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0263 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0674 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0712 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1996-0334 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0680 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0026 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0134 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0023 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0025 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0429 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2004-0116 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0605 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0049 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0353 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2000-0754 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0758 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2000-0173 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0066 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1994-0626 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0824 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2008-0403 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0644 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0676 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0088 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0681 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0140 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0645 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0374 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0646 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0647 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0682 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1994-0121 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0471 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2009-0129 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0401 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0636 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0357 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0648 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0255 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0411 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0713 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0055 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0623 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0615 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0509 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0540 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1991-0674 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1999-0009 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0540 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1991-0364 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2000-0122 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2001-0516 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0320 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0084 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0755 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1991-0006 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1998-0596 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0576 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0552 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0467 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0036 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0098 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0621 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0316 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0608 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2000-0230 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0141 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2004-0818 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1985-0175 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0179 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0051 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1996-0303 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0524 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0700 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1998-0225 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1994-0401 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2006-0155 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2006-155a ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2019-0055 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2020-0266 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2009-0364 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2004-0396 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2018-0106 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2018-0764 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2017-0494 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2008-0572 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2018-0591 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2004-0143 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2007-0641 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2020-0698 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2021-0115 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2007-0643 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1989-0443 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2020-0374 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2007-0065 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1986-0014 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1992-0204 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1992-0129 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1993-0320 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1995-0680 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1997-0596 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1998-0520 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2001-0199 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2002-0530 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2002-0337 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1986-0018 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2019-0137 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0511 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2005-0194 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0028 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2006-0418 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0228 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0691 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2017-0454 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2020-0545 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2009-0413 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2009-0091 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0115 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2006-0669 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0319 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2005-0810 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0628 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0335 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0541 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0525 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0683 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1989-0351 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1997-0592 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1993-0496 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1992-0564 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2001-0016 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2004-0397 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1986-0016 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1995-0574 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2005-0590 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0027 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0243 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0152 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2019-0596 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1945-0001 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0317 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0637 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0014 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2000-0153 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2014-0177 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0756 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0368 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0119 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0508 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0378 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0655 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0525 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0373 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0678 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2000-0690 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0649 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0670 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1991-0442 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0540 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0622 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0578 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0684 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2001-0227 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0679 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0245 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2011-0085 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-1990-0843 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0076 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2015-0020 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0759 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2002-0356 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2013-0391 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2020-0422 ",    "https://legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0404 " ]
print(len(url_list))

if debug :
        # url_list = ["https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2010-0433","https://www.legislation.nsw.gov.au/view/html/inforce/current/epi-2012-0589",]
        url_list=list(url_list)[:10]

all_uses = ["aquaculture","Oyster aquaculture","Pond-based aquaculture","Tank-based aquaculture","animal boarding or training establishments","boarding houses","seniors housing","residential care facilities","shop top housing","home business","home occupations","tourist and visitor accommodation","backpackers' accommodation","bed & breakfast accommodation","farm stay accommodation","hotel or motel accommodation","serviced apartments","commercial premises","business premises","funeral homes","office premises","retail premises","cellar door premises","food & drink premises","pubs ","restaurants or cafes","take-away food & drink premises","small bars","garden centres","hardware & building supplies","kiosks","landscaping material supplies","markets","plant nurseries","roadside stalls","rural supplies","shops","neighbourhood shops","neighbourhood supermarkets","specialised retail premises","timber yards","vehicle sales or hire premises","amusement centres","entertainment facilities","function centres","industrial retail outlets","registered clubs","restricted premises","service stations","veterinary hospitals","wholesale supplies","heavy industries","hazardous industry","offensive industry","light industries","artisan food and drink industry","creative industries ","high technology industries","data centre ","home industry","home industry","domestic goods repair and reuse facilities","general industries","boat building and repair facilities","vehicle body repair workshops","vehicle repair stations","hazardous storage establishments","offensive storage establishments","storage premises","self storage units","depots","warehouse or distribution centres","local distribution premises","car parks","freight transport facilities","passenger transport facilities","educational establishments","schools","medical centres","centre-based child care facilities","community facilities","industrial training facilities","information and education facilities","places of public worship","research stations","respite day care centres","building identification sign","business identification sign","boat launching ramps","jetties","recreation areas","recreation facilities (indoor)","recreation facilities (major)","recreation facilities (outdoor)","mortuaries","public administration building","car park"]

# if debug :
#         all_uses = ["retail premises","cellar door premises","neighbourhood shops"]

# all_uses = ["aquaculture"]

def get_soup(url):
    html = requests.get(url).content
    soup = BeautifulSoup(html, "html.parser")
    return soup

def parse_zone(zone,soup):
    row = [zone, soup.find(class_="title").text]

    headings = [a for a in soup.find(id="pt-cg1."+zone).find_all(class_="frag-clause")] # id="pt-cg1.Zone_B2"
    row = row + [ heading.text for heading in headings]
    return row
    # print(row)


# for l in headings:
#     print(l.text)
def smoosh(current,new_uses):
        cleaned_new =  " ".join(new_uses.split()).replace("3 Permitted with consent","").replace("\n"," ").split(";")
        cleaned_new = [s.lstrip() for s in  cleaned_new] 
        smooshed =  sorted(set(current + cleaned_new) )
        return smooshed

with open('junk.csv', 'w', newline='') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=',',
                            quotechar='"', quoting=csv.QUOTE_ALL)
    spamwriter.writerow(["LEP","Zone","open","Permitted",] + all_uses)

    zone_list=   ["Zone_B1","Zone_B2","Zone_B3","Zone_B4","Zone_B5","Zone_B6","Zone_B7","Zone_B8","Zone_IN1","Zone_IN2","Zone_IN3","Zone_IN4"]
    if False :
        zone_list=   ["Zone_B1"]

    js_file= open("oldLandUseTables.js","w")
    js_file.write("export const oldLandUseTables = [")
        
    for url in url_list:
        url_whole = re.sub(r'/view/html/', '/view/whole/html', url).strip()
        # print("#"+url)
        soup = get_soup(url_whole)
   
        if soup.find(class_="title"): 
                lep = soup.find(class_="title").text
                print("lep",lep)
                for zone in zone_list:
                        # print()
                        # print(zone )
                        try: 
                
                
                                uses_for_zone = []
                                existing_LUTS = parse_zone(zone,soup)     

                                zoneJSON = {"LEP":lep,"zone":zone[5:],
                                "objectives":existing_LUTS[2],
                                "permittedWithout":existing_LUTS[3],
                                "permittedWith":existing_LUTS[4],
                                "prohibited":existing_LUTS[5],
                                }

                                print( "{'LEP':" + lep+
                                ",'zone':"+zone[5:]+","+
                                "'objectives':"+existing_LUTS[2]+","+
                                "'permittedWithout':"+existing_LUTS[3]+","+
                                "'permittedWith':"+existing_LUTS[4]+","+
                                "'prohibited':"+existing_LUTS[5]+",}" , end="")
                                print(',')
                                js_file.write("{'LEP':'" + lep+
                                "','zone':'"+zone[5:]+"',"+
                                "'objectives':'"+existing_LUTS[2]+"',"+
                                "'permittedWithout':'"+existing_LUTS[3]+"',"+
                                "'permittedWith':'"+existing_LUTS[4]+"',"+
                                "'prohibited':'"+existing_LUTS[5]+"',}" + ",")

                                # open = "N"
                                # cleaned_lut =  " ".join(existing_LUTS[3].split()).replace("3 Permitted with consent","").replace("\n"," ").split(";")
                                # cleaned_lut = [s.lstrip().upper() for s in  cleaned_lut] 
                                # for use in [x.rstrip().upper() for x in all_uses]:
                                        
                                #         if use in cleaned_lut :
                                #                 uses_for_zone.append("Y")
                                #         else:
                                #                 uses_for_zone.append("N")
                                # # print( uses_for_zone)
                                # if "Any other deve" in existing_LUTS[4] :
                                #         open = "Y"
                                                
                                # spamwriter.writerow([lep,zone,open,"without"]+uses_for_zone)
                                # uses_for_zone = []
                                # counter=0
                                # cleaned_lut =  " ".join(existing_LUTS[4].split()).replace("3 Permitted without consent","").replace("\n"," ").split(";")
                                # cleaned_lut = [s.lstrip().upper() for s in  cleaned_lut] 
                                # for use in [x.rstrip().upper() for x in all_uses]:
                                #         if use in cleaned_lut :
                                #                 uses_for_zone.append("Y")
                                #                 counter += 1

                                #         else:
                                #                 uses_for_zone.append("N")
                                # print( counter,uses_for_zone)

                                # spamwriter.writerow([lep,zone,open,"with"]+uses_for_zone)
                                # uses_for_zone = []


                                # cleaned_lut =  " ".join(existing_LUTS[5].split()).replace("3 Permitted with consent","").replace("\n"," ").split(";")
                                # cleaned_lut = [s.lstrip().upper() for s in  cleaned_lut] 
                                # for use in [x.rstrip().upper() for x in all_uses]:
                                          
                                #         if use in cleaned_lut :
                                #                 uses_for_zone.append("Y")
                                #         else:
                                #                 uses_for_zone.append("N")
                                                
                                # spamwriter.writerow([lep,zone,open,"prohibited"]+uses_for_zone)

                                # print([lep,zone]+existing_LUTS)

                        except:
                               
                                print("Error:" ,zone)


        else:
                print("skipping",url_whole)

    js_file.write("]")
    js_file.close()